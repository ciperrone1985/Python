# -*- coding: utf-8 -*-
"""
Created on Sat Jul 19 17:06:25 2025
Analisa o índice de confiança

@author: Cintia Perrone
"""
# Importando bibliotecas necessárias
from selenium import webdriver
from selenium.webdriver.chrome.service import Service
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import pandas as pd

# Caminho onde o driver do chrome está instalado
CHROMEDRIVER_PATH = r"F:\Instaladores\chromedriver-win64\chromedriver.exe"

# URL utilizada
URL = "https://colintalkscrypto.com/cbbi/"

options = webdriver.ChromeOptions()
options.add_argument("--headless") #irá rodar em segundo plano
options.add_argument("--disable-gpu") # desabilita gráficos

# Acessa o serviço e o driver com as opções acima:
servico = Service(CHROMEDRIVER_PATH)
driver = webdriver.Chrome(service=servico, options=options)

# Caso dê algum problema irá fechar o navegador
try:
    driver.get(URL)
    wait = WebDriverWait(driver, 15) # irá aguardar 15 segundos
    
    # aguarda até o indicador ficar visível
    indicador_confianca = wait.until(EC.visibility_of_element_located((By.CSS_SELECTOR, "h1.title.confidence-score-value")))
    data_indicador = wait.until(EC.visibility_of_element_located((By.CSS_SELECTOR, "h2.subtitle")))
    
    #Extraindo o valor para texto
    indicador_confianca = indicador_confianca.text.strip()
    data_indicador = data_indicador.text.strip()

finally:
    driver.quit()
    
# Adicionando os indicadores em uma tabela
df = pd.DataFrame({'indicador_confianca': [indicador_confianca], 'data_indicador': [data_indicador]})
